<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inventory Management System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/app.css" />
</head>
<body>
  <main class="auth-wrap" id="login-panel">
    <section class="auth-card">
      <h1 id="auth-site-name">Inventory Management System</h1>
      <p id="auth-site-tagline">Internal stock operations dashboard.</p>
      <form id="login-form" class="form-grid">
        <label>
          Email
          <input type="email" id="login-email" required autocomplete="username" />
        </label>
        <label>
          Password
          <input type="password" id="login-password" required autocomplete="current-password" />
        </label>
        <button class="btn" type="submit">Sign In</button>
      </form>
      <p class="hint">Use your internal account credentials.</p>
    </section>
  </main>

  <section id="app-shell" class="app-shell hidden">
    <aside class="sidebar">
      <div class="brand">
        <h2 id="site-name">Inventory</h2>
        <p id="site-tagline">Operations</p>
      </div>

      <nav class="nav" id="main-nav">
        <button class="nav-btn active" data-view="overview">Overview</button>
        <button class="nav-btn" data-view="inventory">Inventory</button>
        <button class="nav-btn" data-view="movements">Movements</button>
        <button class="nav-btn" data-view="catalog">Catalog</button>
        <button class="nav-btn" data-view="analytics">Analytics</button>
        <button class="nav-btn" data-view="admin" id="admin-nav-btn">Admin</button>
        <button class="nav-btn" data-view="docs">API Docs</button>
      </nav>

      <div class="sidebar-footer">
        <p class="mini" id="user-badge">-</p>
        <button id="logout-btn" class="btn secondary">Logout</button>
      </div>
    </aside>

    <section class="workspace">
      <header class="workspace-head">
        <div>
          <h1 id="view-title">Overview</h1>
          <p id="read-only-badge" class="badge hidden">Read-only mode is ON</p>
        </div>
        <div class="workspace-meta">
          <span class="badge" id="site-open-badge">Site Open</span>
          <span class="badge" id="time-badge"></span>
        </div>
      </header>

      <div class="views">
        <section class="view active" data-view-panel="overview">
          <div class="kpi-grid" id="summary-grid"></div>

          <div class="grid two">
            <article class="card">
              <h3>Stock By Storage Area</h3>
              <div id="stock-by-area" class="bars"></div>
            </article>

            <article class="card">
              <h3>Low Stock Watchlist</h3>
              <div class="table-wrap compact">
                <table>
                  <thead>
                    <tr><th>Item</th><th>SKU</th><th>Total</th><th>Reorder</th></tr>
                  </thead>
                  <tbody id="low-stock-table"></tbody>
                </table>
              </div>
            </article>
          </div>

          <article class="card">
            <h3>Movement Trend (Last 14 Days)</h3>
            <div id="movement-trend-bars" class="trend-bars"></div>
          </article>
        </section>

        <section class="view" data-view-panel="inventory">
          <article class="card">
            <div class="card-head">
              <h3>Inventory Levels</h3>
              <div class="inline-controls">
                <input id="levels-search" placeholder="Search item, SKU, category, area" />
                <select id="levels-area-filter"></select>
                <select id="levels-page-size">
                  <option value="10">10</option>
                  <option value="25" selected>25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
                <button class="btn ghost" id="levels-refresh" type="button">Refresh</button>
              </div>
            </div>

            <div class="table-wrap tall">
              <table>
                <thead>
                  <tr>
                    <th data-sort="item_name">Item</th>
                    <th data-sort="sku">SKU</th>
                    <th data-sort="category">Category</th>
                    <th data-sort="storage_area_name">Area</th>
                    <th data-sort="quantity">Qty</th>
                    <th data-sort="total_item_quantity">Total</th>
                    <th data-sort="reorder_level">Reorder</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="levels-table"></tbody>
              </table>
            </div>
            <div class="pager" id="levels-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="movements">
          <article class="card">
            <h3>Apply Movement</h3>
            <form id="movement-form" class="form-grid movement-grid">
              <label>Type
                <select id="move-type" required>
                  <option value="receive">Receive</option>
                  <option value="issue">Issue</option>
                  <option value="transfer">Transfer</option>
                  <option value="adjust">Adjust (+/-)</option>
                  <option value="set">Set Absolute</option>
                </select>
              </label>
              <label>Item
                <select id="move-item" required></select>
              </label>
              <label id="move-qty-wrap">Quantity
                <input id="move-quantity" type="number" step="0.001" />
              </label>
              <label class="hidden" id="move-target-wrap">Target Quantity
                <input id="move-target" type="number" min="0" step="0.001" />
              </label>
              <label id="move-from-wrap">From Area
                <select id="move-from"></select>
              </label>
              <label id="move-to-wrap">To Area
                <select id="move-to"></select>
              </label>
              <label>Reference
                <input id="move-reference" placeholder="PO-1003 / JOB-22" />
              </label>
              <label>Note
                <input id="move-note" placeholder="What changed and why" />
              </label>
              <div class="actions">
                <button class="btn" type="submit">Apply</button>
              </div>
            </form>
          </article>

          <article class="card">
            <div class="card-head">
              <h3>Movement History</h3>
              <div class="inline-controls">
                <input id="movements-search" placeholder="Search item, note, reference" />
                <select id="movements-type-filter">
                  <option value="">All Types</option>
                  <option value="receive">Receive</option>
                  <option value="issue">Issue</option>
                  <option value="transfer">Transfer</option>
                  <option value="adjust">Adjust</option>
                  <option value="set">Set</option>
                </select>
                <input id="movements-date-from" type="date" />
                <input id="movements-date-to" type="date" />
                <select id="movements-page-size">
                  <option value="20">20</option>
                  <option value="50" selected>50</option>
                  <option value="100">100</option>
                </select>
                <button class="btn ghost" id="movements-refresh" type="button">Refresh</button>
              </div>
            </div>

            <div class="table-wrap tall">
              <table>
                <thead>
                  <tr>
                    <th data-sort="created_at">Time</th>
                    <th data-sort="movement_type">Type</th>
                    <th data-sort="item_name">Item</th>
                    <th data-sort="quantity">Qty</th>
                    <th>From</th>
                    <th>To</th>
                    <th>By</th>
                    <th>Reference</th>
                    <th>Note</th>
                  </tr>
                </thead>
                <tbody id="movements-table"></tbody>
              </table>
            </div>
            <div class="pager" id="movements-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="catalog">
          <div class="grid two">
            <article class="card">
              <h3>Storage Areas</h3>
              <form id="area-form" class="form-grid compact">
                <input type="hidden" id="area-id" />
                <label>Code <input id="area-code" maxlength="20" required /></label>
                <label>Name <input id="area-name" required /></label>
                <label>Description <input id="area-description" /></label>
                <label class="inline-check"><input type="checkbox" id="area-active" checked /> Active</label>
                <div class="actions">
                  <button class="btn" type="submit">Save</button>
                  <button class="btn ghost" type="button" id="area-reset">Reset</button>
                </div>
              </form>
              <div class="table-wrap">
                <table>
                  <thead>
                    <tr><th>Code</th><th>Name</th><th>Status</th><th>Actions</th></tr>
                  </thead>
                  <tbody id="areas-table"></tbody>
                </table>
              </div>
            </article>

            <article class="card">
              <h3>Items</h3>
              <form id="item-form" class="form-grid compact">
                <input type="hidden" id="item-id" />
                <label>SKU <input id="item-sku" maxlength="30" required /></label>
                <label>Name <input id="item-name" required /></label>
                <label>Category <input id="item-category" /></label>
                <label>Unit <input id="item-unit" value="unit" /></label>
                <label>Reorder Level <input id="item-reorder" type="number" min="0" step="0.001" value="0" /></label>
                <label>Notes <input id="item-notes" /></label>
                <label class="inline-check"><input type="checkbox" id="item-active" checked /> Active</label>
                <div class="actions">
                  <button class="btn" type="submit">Save</button>
                  <button class="btn ghost" type="button" id="item-reset">Reset</button>
                </div>
              </form>
              <div class="table-wrap tall">
                <table>
                  <thead>
                    <tr><th>SKU</th><th>Name</th><th>Category</th><th>Reorder</th><th>Status</th><th>Actions</th></tr>
                  </thead>
                  <tbody id="items-table"></tbody>
                </table>
              </div>
            </article>
          </div>
        </section>

        <section class="view" data-view-panel="analytics">
          <div class="grid two">
            <article class="card">
              <h3>Top Moved Items</h3>
              <div class="table-wrap">
                <table>
                  <thead>
                    <tr><th>Item</th><th>SKU</th><th>Moves</th><th>Total Moved</th></tr>
                  </thead>
                  <tbody id="top-moved-table"></tbody>
                </table>
              </div>
            </article>

            <article class="card">
              <h3>Category Mix</h3>
              <div id="category-mix-bars" class="bars"></div>
            </article>
          </div>

          <article class="card">
            <h3>Storage Utilization</h3>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr><th>Storage Area</th><th>Total Qty</th><th>Active Slots</th></tr>
                </thead>
                <tbody id="storage-utilization-table"></tbody>
              </table>
            </div>
          </article>
        </section>

        <section class="view" data-view-panel="admin">
          <div class="grid two">
            <article class="card">
              <h3>System Settings</h3>
              <form id="settings-form" class="form-grid">
                <label>Site Name <input id="set-site-name" required /></label>
                <label>Tagline <input id="set-site-tagline" /></label>
                <label>Default Currency <input id="set-default-currency" maxlength="5" /></label>
                <label>Low Stock Limit <input id="set-low-stock-limit" type="number" min="1" max="200" /></label>
                <label>Table Page Size <input id="set-table-page-size" type="number" min="10" max="100" /></label>
                <label class="inline-check"><input type="checkbox" id="set-site-open" /> Site Open</label>
                <label class="inline-check"><input type="checkbox" id="set-read-only" /> Read-only Mode</label>
                <label class="inline-check"><input type="checkbox" id="set-allow-negative" /> Allow Negative Stock</label>
                <div class="actions">
                  <button class="btn" type="submit">Save Settings</button>
                </div>
              </form>
            </article>

            <article class="card" id="admin-users-card">
              <h3>Admin Users</h3>
              <form id="user-form" class="form-grid compact">
                <input type="hidden" id="user-id" />
                <label>Name <input id="user-name" required /></label>
                <label>Email <input id="user-email" type="email" required /></label>
                <label>Password <input id="user-password" type="password" placeholder="Leave blank to keep current" /></label>
                <label>Role
                  <select id="user-role">
                    <option value="owner">Owner</option>
                    <option value="manager">Manager</option>
                    <option value="viewer">Viewer</option>
                  </select>
                </label>
                <label class="inline-check"><input type="checkbox" id="user-active" checked /> Active</label>
                <div class="actions">
                  <button class="btn" type="submit">Save User</button>
                  <button class="btn ghost" type="button" id="user-reset">Reset</button>
                </div>
              </form>
              <div class="table-wrap tall">
                <table>
                  <thead>
                    <tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Actions</th></tr>
                  </thead>
                  <tbody id="users-table"></tbody>
                </table>
              </div>
            </article>
          </div>
        </section>

        <section class="view" data-view-panel="docs">
          <article class="card">
            <div class="card-head">
              <h3>API Documentation</h3>
              <a class="btn ghost" href="/api-docs" target="_blank" rel="noreferrer">Open Full Docs</a>
            </div>
            <p class="hint">Session-based API. Authenticate first with <code>POST /api/auth/login</code>.</p>
            <div class="table-wrap tall">
              <table>
                <thead>
                  <tr><th>Method</th><th>Path</th><th>Description</th></tr>
                </thead>
                <tbody id="api-docs-table"></tbody>
              </table>
            </div>
          </article>
        </section>
      </div>
    </section>
  </section>

  <p id="toast" class="toast hidden"></p>
  <script src="/dashboard.js"></script>
</body>
</html>

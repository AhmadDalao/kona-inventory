<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inventory Management System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/app.css" />
</head>
<body>
  <main class="auth-screen" id="login-panel">
    <section class="auth-card">
      <div>
        <p class="eyebrow">Internal Workspace</p>
        <h1 id="auth-site-name">Inventory Management System</h1>
        <p id="auth-site-tagline">Track inventory, movements, controls, and admin actions in one place.</p>
      </div>

      <form id="login-form" class="form-grid">
        <label>
          <span id="login-email-label">Email</span>
          <input type="email" id="login-email" required autocomplete="username" />
        </label>
        <label>
          <span id="login-password-label">Password</span>
          <input type="password" id="login-password" required autocomplete="current-password" />
        </label>
        <button class="btn primary" type="submit"><span id="login-submit-label">Sign In</span></button>
      </form>

      <p class="hint" id="login-hint-text">Use your company credentials.</p>
    </section>
  </main>

  <section id="app-shell" class="app-shell hidden">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <div class="brand-mark">K</div>
        <div>
          <h2 id="site-name">Kona Inventory</h2>
          <p id="site-tagline">Operations Console</p>
        </div>
      </div>

      <div class="sidebar-group">
        <p class="group-label" id="nav-main-menu-label">Main Menu</p>
        <nav class="nav" id="main-nav">
          <button class="nav-btn active" data-view="overview" id="nav-overview"><i class="fa-solid fa-house"></i><span id="nav-overview-label">Overview</span></button>
          <button class="nav-btn" data-view="inventory" id="nav-inventory"><i class="fa-solid fa-boxes-stacked"></i><span id="nav-inventory-label">Inventory</span></button>
          <button class="nav-btn" data-view="movements" id="nav-movements"><i class="fa-solid fa-arrows-rotate"></i><span id="nav-movements-label">Movements</span></button>
          <button class="nav-btn" data-view="areas" id="nav-areas"><i class="fa-solid fa-warehouse"></i><span id="nav-areas-label">Storage Areas</span></button>
          <button class="nav-btn" data-view="items" id="nav-items"><i class="fa-solid fa-box-open"></i><span id="nav-items-label">Items</span></button>
          <button class="nav-btn" data-view="analytics" id="nav-analytics"><i class="fa-solid fa-chart-line"></i><span id="nav-analytics-label">Analytics</span></button>
        </nav>
      </div>

      <div class="sidebar-group">
        <p class="group-label" id="nav-control-label">Control</p>
        <nav class="nav">
          <button class="nav-btn" data-view="admin" id="nav-admin"><i class="fa-solid fa-user-shield"></i><span id="nav-admin-label">Admins</span></button>
          <button class="nav-btn" data-view="trash" id="nav-trash"><i class="fa-solid fa-trash-can"></i><span id="nav-trash-label">Trash</span></button>
          <button class="nav-btn" data-view="audit" id="nav-audit"><i class="fa-solid fa-fingerprint"></i><span id="nav-audit-label">Audit Log</span></button>
          <button class="nav-btn" data-view="settings" id="nav-settings"><i class="fa-solid fa-sliders"></i><span id="nav-settings-label">Settings</span></button>
          <button class="nav-btn" data-view="docs" id="nav-docs"><i class="fa-solid fa-book-open"></i><span id="nav-docs-label">Docs</span></button>
        </nav>
      </div>

      <div class="sidebar-footer">
        <div class="user-chip">
          <i class="fa-solid fa-user"></i>
          <p id="user-badge">-</p>
        </div>
        <button id="logout-btn" class="btn ghost" type="button"><span id="logout-label">Logout</span></button>
      </div>
    </aside>

    <section class="workspace">
      <header class="workspace-head">
        <div class="head-left">
          <button id="sidebar-toggle" class="icon-btn" type="button" title="Toggle Sidebar"><i class="fa-solid fa-bars"></i></button>
          <label class="search-wrap">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input id="global-search" placeholder="Search current view" />
          </label>
        </div>
        <div class="head-right">
          <button id="head-refresh" class="btn ghost" type="button"><i class="fa-solid fa-rotate-right"></i> <span id="head-refresh-label">Refresh</span></button>
          <a class="btn ghost" href="/api-docs" target="_blank" rel="noreferrer"><i class="fa-solid fa-code"></i> <span id="head-api-label">API</span></a>
          <span class="badge" id="read-only-badge">Read-only mode is ON</span>
          <span class="badge" id="site-open-badge">Site Open</span>
          <span class="badge" id="time-badge"></span>
        </div>
      </header>

      <div class="workspace-title">
        <div>
          <h1 id="view-title">Overview</h1>
          <p id="view-subtitle">Snapshot of stock, risk, and movement activity.</p>
        </div>
      </div>

      <div class="views">
        <section class="view active" data-view-panel="overview">
          <div class="overview-top" id="summary-grid"></div>

          <article class="card">
            <div class="card-head">
              <h3>Inventory Health</h3>
              <span class="hint">In stock vs low vs out</span>
            </div>
            <div id="inventory-health"></div>
          </article>

          <div class="grid two">
            <article class="card">
              <h3>Stock By Storage Area</h3>
              <div id="stock-by-area" class="bars"></div>
            </article>

            <article class="card">
              <h3>Low Stock Watchlist</h3>
              <div class="table-wrap compact">
                <table>
                  <thead>
                    <tr><th>Item</th><th>SKU</th><th>Total</th><th>Reorder</th></tr>
                  </thead>
                  <tbody id="low-stock-table"></tbody>
                </table>
              </div>
              <div class="pager" id="low-stock-pager"></div>
            </article>
          </div>

          <article class="card">
            <h3>Movement Trend (14 days)</h3>
            <div id="movement-trend-bars" class="trend-bars"></div>
          </article>
        </section>

        <section class="view" data-view-panel="inventory">
          <article class="card">
            <div class="card-head">
              <h3 id="levels-title">Inventory Items</h3>
              <div class="inline-controls">
                <select id="levels-view-mode" title="Inventory view mode">
                  <option value="summary" selected>Items</option>
                  <option value="area">Areas</option>
                </select>
                <label class="input-inline">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  <input id="levels-search" placeholder="Search product, SKU, category, area" />
                </label>
                <span id="levels-area-filter-wrap">
                  <select id="levels-area-filter"></select>
                </span>
                <select id="levels-status-filter">
                  <option value="">All Status</option>
                  <option value="in">In Area</option>
                  <option value="low">Low In Area</option>
                  <option value="out">Out In Area</option>
                </select>
                <select id="levels-page-size">
                  <option value="10">10</option>
                  <option value="25" selected>25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
                <button class="btn ghost" id="levels-refresh" type="button">Refresh</button>
              </div>
            </div>
            <p class="hint inventory-legend" id="levels-legend">Each row is one item in one storage area. <strong>Area Qty</strong> is this row only, <strong>Company Total</strong> is across all areas.</p>

            <div class="table-wrap tall">
              <table>
                <thead id="levels-head"></thead>
                <tbody id="levels-table"></tbody>
              </table>
            </div>
            <div class="pager" id="levels-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="movements">
          <article class="card movement-card">
            <div class="movement-card-head">
              <div>
                <h3>Movement Center</h3>
                <p class="hint">Step through one flow for receive, issue, transfer, adjust, and set actions.</p>
              </div>
              <span class="badge" id="movement-mode-badge">Mode: Receive</span>
            </div>

            <form id="movement-form" class="form-grid movement-grid movement-form-shell">
              <section class="movement-block">
                <h4>1. Action</h4>
                <div class="movement-block-grid two">
                  <label>Type
                    <select id="move-type" required>
                      <option value="receive">Receive</option>
                      <option value="issue">Issue</option>
                      <option value="transfer">Transfer</option>
                      <option value="adjust">Adjust (+/-)</option>
                      <option value="set">Set Absolute</option>
                    </select>
                  </label>
                  <label>Item
                    <select id="move-item" required></select>
                  </label>
                </div>
              </section>

              <section class="movement-block">
                <h4>2. Quantity & Areas</h4>
                <div class="movement-block-grid four">
                  <label id="move-qty-wrap">Quantity
                    <input id="move-quantity" type="number" step="0.001" />
                  </label>
                  <label class="hidden" id="move-target-wrap">Target Quantity
                    <input id="move-target" type="number" min="0" step="0.001" />
                  </label>
                  <label id="move-from-wrap">From Area
                    <select id="move-from"></select>
                  </label>
                  <label id="move-to-wrap">To Area
                    <select id="move-to"></select>
                  </label>
                </div>
              </section>

              <section class="movement-block">
                <h4>3. Context</h4>
                <div class="movement-block-grid two">
                  <label>Reference
                    <input id="move-reference" placeholder="PO-1003 / JOB-22" />
                  </label>
                  <label>Note
                    <input id="move-note" placeholder="What changed and why" />
                  </label>
                </div>
              </section>

              <aside class="movement-preview">
                <strong>Preview</strong>
                <p class="hint" id="movement-preview-text">Receive quantity into destination area.</p>
              </aside>

              <div class="actions movement-submit">
                <button class="btn primary" type="submit"><i class="fa-solid fa-check"></i> Apply Movement</button>
              </div>
            </form>
          </article>

          <article class="card movement-history-card">
            <div class="movement-history-head">
              <div>
                <h3>Movement History</h3>
                <p class="hint">Track every stock change with filters by type, period, and keywords.</p>
              </div>
            </div>

            <div class="movement-filter-grid">
              <label class="movement-filter-label search">
                <span>Search</span>
                <span class="input-inline">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  <input id="movements-search" placeholder="Search item, note, reference" />
                </span>
              </label>
              <label class="movement-filter-label">
                <span>Type</span>
                <select id="movements-type-filter">
                  <option value="">All Types</option>
                  <option value="receive">Receive</option>
                  <option value="issue">Issue</option>
                  <option value="transfer">Transfer</option>
                  <option value="adjust">Adjust</option>
                  <option value="set">Set</option>
                </select>
              </label>
              <label class="movement-filter-label">
                <span>Period</span>
                <select id="movements-range-filter">
                  <option value="today">Today</option>
                  <option value="this_month" selected>This Month</option>
                  <option value="last_month">Last Month</option>
                  <option value="custom">Custom</option>
                  <option value="all">All Time</option>
                </select>
              </label>
              <label id="movements-custom-start-wrap" class="movement-filter-label range-custom hidden">
                <span>From</span>
                <input id="movements-date-from" type="date" />
              </label>
              <label id="movements-custom-end-wrap" class="movement-filter-label range-custom hidden">
                <span>To</span>
                <input id="movements-date-to" type="date" />
              </label>
              <label class="movement-filter-label mini">
                <span>Rows</span>
                <select id="movements-page-size">
                  <option value="20">20</option>
                  <option value="50" selected>50</option>
                  <option value="100">100</option>
                </select>
              </label>
              <button class="btn ghost movement-refresh" id="movements-refresh" type="button">Refresh</button>
            </div>

            <div class="movement-history-meta">
              <p id="movements-range-label" class="hint range-label">Period: This Month</p>
              <div id="movements-stats" class="movement-stats"></div>
            </div>

            <div class="table-wrap tall">
              <table>
                <thead>
                  <tr>
                    <th data-sort="created_at">Time</th>
                    <th data-sort="movement_type">Type</th>
                    <th data-sort="item_name">Item</th>
                    <th data-sort="quantity">Qty</th>
                    <th>From</th>
                    <th>To</th>
                    <th>By</th>
                    <th>Reference</th>
                    <th>Note</th>
                  </tr>
                </thead>
                <tbody id="movements-table"></tbody>
              </table>
            </div>
            <div class="pager" id="movements-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="areas">
          <article class="card entity-card">
            <div class="entity-head">
              <div>
                <h3>Storage Areas</h3>
                <p class="hint">Define active warehouse zones and staging areas.</p>
              </div>
              <div class="actions">
                <span class="badge">Zones</span>
                <button class="btn primary" id="areas-add-btn" type="button"><i class="fa-solid fa-plus"></i> Add Area</button>
              </div>
            </div>
            <div class="table-headline">
              <strong>Area Directory</strong>
              <span class="hint">Edit, disable, or move records to trash.</span>
            </div>
            <div class="table-wrap tall catalog-table-wrap">
              <table class="catalog-table">
                <thead>
                  <tr><th>Code</th><th>Name</th><th>Status</th><th>Actions</th></tr>
                </thead>
                <tbody id="areas-table"></tbody>
              </table>
            </div>
            <div class="pager" id="areas-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="items">
          <article class="card entity-card">
            <div class="entity-head">
              <div>
                <h3>Item Catalog</h3>
                <p class="hint">Manage product SKUs, categories, units, and reorder points.</p>
              </div>
              <div class="actions">
                <span class="badge">SKUs</span>
                <button class="btn primary" id="items-add-btn" type="button"><i class="fa-solid fa-plus"></i> Add Item</button>
              </div>
            </div>
            <div class="table-headline">
              <strong>Item Directory</strong>
              <span class="hint">Use edit for quick updates, image upload, and on-ground stock sync.</span>
            </div>
            <div class="table-wrap tall catalog-table-wrap">
              <table class="catalog-table">
                <thead>
                  <tr><th>Image</th><th>SKU</th><th>Name</th><th>Category</th><th>Reorder</th><th>On Ground</th><th>Status</th><th>Actions</th></tr>
                </thead>
                <tbody id="items-table"></tbody>
              </table>
            </div>
            <div class="pager" id="items-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="analytics">
          <div class="grid two">
            <article class="card">
              <h3>Top Moved Items</h3>
              <div class="table-wrap compact">
                <table>
                  <thead>
                    <tr><th>Item</th><th>SKU</th><th>Moves</th><th>Total Moved</th></tr>
                  </thead>
                  <tbody id="top-moved-table"></tbody>
                </table>
              </div>
              <div class="pager" id="top-moved-pager"></div>
            </article>

            <article class="card">
              <h3>Category Mix</h3>
              <div id="category-mix-bars" class="bars"></div>
            </article>
          </div>

          <article class="card">
            <h3>Storage Utilization</h3>
            <div class="table-wrap compact">
              <table>
                <thead>
                  <tr><th>Storage Area</th><th>Total Qty</th><th>Active Slots</th></tr>
                </thead>
                <tbody id="storage-utilization-table"></tbody>
              </table>
            </div>
            <div class="pager" id="storage-utilization-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="admin">
          <article class="card admin-hero">
            <div>
              <h3>Admins</h3>
              <p class="hint">Manage admin accounts.</p>
            </div>
            <button class="btn primary" type="button" id="users-add-btn"><i class="fa-solid fa-user-plus"></i> Add New</button>
          </article>

          <article class="card" id="admin-users-card">
            <div class="admin-toolbar">
              <label class="admin-show-control">
                <span>Show</span>
                <select id="users-limit">
                  <option value="10" selected>10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
                <span>entries</span>
              </label>
              <div class="admin-filter-controls">
                <select id="users-role-filter">
                  <option value="">All Roles</option>
                  <option value="owner">Owner</option>
                  <option value="manager">Manager</option>
                  <option value="viewer">Viewer</option>
                </select>
                <label class="input-inline">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  <input id="users-search" placeholder="Search admins..." />
                </label>
                <button class="btn ghost" type="button" id="users-search-btn"><i class="fa-solid fa-magnifying-glass"></i> Search</button>
                <button class="btn ghost" type="button" id="users-clear-btn"><i class="fa-solid fa-eraser"></i> Clear</button>
                <button class="btn ghost" type="button" id="users-refresh"><i class="fa-solid fa-rotate-right"></i> Refresh</button>
              </div>
            </div>

            <div class="table-wrap tall admin-table-wrap">
              <table class="admin-table">
                <thead>
                  <tr><th>ID</th><th>Name</th><th>Username</th><th>Email</th><th>Role</th><th>Status</th><th>Created</th><th>Actions</th></tr>
                </thead>
                <tbody id="users-table"></tbody>
              </table>
            </div>
            <div class="pager" id="users-pager"></div>
          </article>

          <article class="card">
            <div class="card-head">
              <h3>Owner Activity Log</h3>
              <div class="inline-controls">
                <select id="admin-activity-user-filter">
                  <option value="">All Admins</option>
                </select>
                <select id="admin-activity-action-filter">
                  <option value="">All Actions</option>
                  <option value="create">Created</option>
                  <option value="update">Edited</option>
                  <option value="delete">Deleted</option>
                  <option value="restore">Restored</option>
                </select>
                <select id="admin-activity-range-filter">
                  <option value="today">Today</option>
                  <option value="this_month" selected>This Month</option>
                  <option value="last_month">Last Month</option>
                  <option value="custom">Custom</option>
                  <option value="all">All Time</option>
                </select>
                <label id="admin-activity-custom-start-wrap" class="range-custom hidden">
                  <span>From</span>
                  <input id="admin-activity-date-from" type="date" />
                </label>
                <label id="admin-activity-custom-end-wrap" class="range-custom hidden">
                  <span>To</span>
                  <input id="admin-activity-date-to" type="date" />
                </label>
                <select id="admin-activity-limit">
                  <option value="50">50</option>
                  <option value="100" selected>100</option>
                  <option value="200">200</option>
                </select>
                <button class="btn ghost" type="button" id="admin-activity-refresh">Refresh</button>
              </div>
            </div>
            <p id="admin-activity-range-label" class="hint range-label">Period: This Month</p>
            <div class="table-wrap compact">
              <table>
                <thead>
                  <tr><th>Time</th><th>Admin</th><th>Action</th><th>Entity</th><th>Status</th><th>Summary</th></tr>
                </thead>
                <tbody id="admin-activity-table"></tbody>
              </table>
            </div>
            <div class="pager" id="admin-activity-pager"></div>

            <h3 class="card-subtitle">Admin Notes</h3>
            <ul class="plain-list">
              <li>Owner has full control including settings and audit trail.</li>
              <li>Manager can run inventory operations, but cannot see owner audit log.</li>
              <li>Viewer is read-only and cannot edit inventory records.</li>
              <li>All write actions are logged with actor, action, timestamp, and IP.</li>
            </ul>
          </article>
        </section>

        <section class="view" data-view-panel="trash">
          <article class="card">
            <div class="card-head">
              <h3>Trash & Restore</h3>
              <div class="inline-controls">
                <label class="input-inline">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  <input id="trash-search" placeholder="Search deleted records" />
                </label>
                <select id="trash-entity-filter">
                  <option value="">All Records</option>
                  <option value="items">Items</option>
                  <option value="storage_areas">Storage Areas</option>
                </select>
                <select id="trash-deleted-by-filter">
                  <option value="">All Users</option>
                </select>
                <select id="trash-range-filter">
                  <option value="today">Today</option>
                  <option value="this_month" selected>This Month</option>
                  <option value="last_month">Last Month</option>
                  <option value="custom">Custom</option>
                  <option value="all">All Time</option>
                </select>
                <label id="trash-custom-start-wrap" class="range-custom hidden">
                  <span>From</span>
                  <input id="trash-date-from" type="date" />
                </label>
                <label id="trash-custom-end-wrap" class="range-custom hidden">
                  <span>To</span>
                  <input id="trash-date-to" type="date" />
                </label>
                <button class="btn ghost" id="trash-refresh" type="button">Refresh</button>
              </div>
            </div>
            <p class="hint">Deleted records stay here until restored. Owner can also permanently delete from trash.</p>
            <p id="trash-range-label" class="hint range-label">Period: This Month</p>
            <div class="actions">
              <span class="badge warn" id="trash-items-count">Deleted Items: 0</span>
              <span class="badge bad" id="trash-areas-count">Deleted Areas: 0</span>
            </div>
          </article>

          <div class="grid two">
            <article class="card">
              <h3>Deleted Items</h3>
              <div class="table-wrap tall">
                <table>
                  <thead>
                    <tr><th>Name</th><th>SKU</th><th>Category</th><th>Deleted By</th><th>Deleted At</th><th>Actions</th></tr>
                  </thead>
                  <tbody id="trash-items-table"></tbody>
                </table>
              </div>
              <div class="pager" id="trash-items-pager"></div>
            </article>

            <article class="card">
              <h3>Deleted Storage Areas</h3>
              <div class="table-wrap tall">
                <table>
                  <thead>
                    <tr><th>Code</th><th>Name</th><th>Deleted By</th><th>Deleted At</th><th>Actions</th></tr>
                  </thead>
                  <tbody id="trash-areas-table"></tbody>
                </table>
              </div>
              <div class="pager" id="trash-areas-pager"></div>
            </article>
          </div>

        </section>

        <section class="view" data-view-panel="audit">
          <article class="card">
            <div class="card-head">
              <h3>Owner Audit Log</h3>
              <div class="inline-controls">
                <label class="input-inline">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  <input id="audit-search" placeholder="Search actor, action, summary" />
                </label>
                <select id="audit-entity-filter">
                  <option value="">All Entities</option>
                  <option value="item">Item</option>
                  <option value="storage_area">Storage Area</option>
                  <option value="stock_movement">Movement</option>
                  <option value="user">User</option>
                  <option value="settings">Settings</option>
                  <option value="trash">Trash</option>
                </select>
                <select id="audit-action-filter">
                  <option value="">All Actions</option>
                  <option value="create">Created</option>
                  <option value="update">Edited</option>
                  <option value="delete">Deleted</option>
                  <option value="restore">Restored</option>
                </select>
                <select id="audit-range-filter">
                  <option value="today">Today</option>
                  <option value="this_month" selected>This Month</option>
                  <option value="last_month">Last Month</option>
                  <option value="custom">Custom</option>
                  <option value="all">All Time</option>
                </select>
                <label id="audit-custom-start-wrap" class="range-custom hidden">
                  <span>From</span>
                  <input id="audit-date-from" type="date" />
                </label>
                <label id="audit-custom-end-wrap" class="range-custom hidden">
                  <span>To</span>
                  <input id="audit-date-to" type="date" />
                </label>
                <select id="audit-limit">
                  <option value="50">50</option>
                  <option value="100" selected>100</option>
                  <option value="200">200</option>
                </select>
                <button class="btn ghost" id="audit-refresh" type="button">Refresh</button>
              </div>
            </div>
            <p id="audit-range-label" class="hint range-label">Period: This Month</p>

            <div class="table-wrap tall">
              <table>
                <thead>
                  <tr><th>Time</th><th>User</th><th>Role</th><th>Action</th><th>Entity</th><th>Status</th><th>Summary</th><th>Meta</th></tr>
                </thead>
                <tbody id="audit-table"></tbody>
              </table>
            </div>
            <div class="pager" id="audit-pager"></div>
          </article>
        </section>

        <section class="view" data-view-panel="settings">
          <div class="grid two">
            <article class="card settings-card">
              <div class="settings-head">
                <h3><i class="fa-solid fa-gear"></i> General settings</h3>
                <p class="hint">Core website controls and branding values.</p>
              </div>
              <form id="settings-form" class="form-grid settings-grid">
                <label>Company Name <input id="set-company-name" required /></label>
                <label>Site Name <input id="set-site-name" required /></label>
                <label>Tagline <input id="set-site-tagline" /></label>
                <label>Timezone
                  <select id="set-timezone"></select>
                </label>
                <label>Default Currency
                  <select id="set-default-currency"></select>
                </label>
                <label>Item Units (comma separated) <input id="set-item-units" placeholder="unit, pcs, box, pack, kg, l" /></label>
                <label>Low Stock Limit <input id="set-low-stock-limit" type="number" min="1" max="200" /></label>
                <label>Table Page Size <input id="set-table-page-size" type="number" min="10" max="100" /></label>
                <label>Theme Mode
                  <select id="set-theme-mode">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                    <option value="slate">Slate</option>
                  </select>
                </label>
                <label>Theme Palette
                  <select id="set-theme-palette">
                    <option value="material-indigo">Material Indigo</option>
                    <option value="material-cyan">Material Cyan</option>
                    <option value="material-emerald">Material Emerald</option>
                    <option value="material-rose">Material Rose</option>
                  </select>
                </label>
                <label>Dashboard Style
                  <select id="set-dashboard-style">
                    <option value="kona">Kona</option>
                    <option value="classic">Classic</option>
                  </select>
                </label>
                <div class="settings-preview swatch-preview" id="settings-preview">
                  <span class="preview-title">Palette preview</span>
                  <div class="preview-swatches">
                    <span class="preview-dot" id="preview-primary" title="Brand Primary"></span>
                    <span class="preview-dot" id="preview-icon-primary" title="Icon Primary"></span>
                    <span class="preview-dot" id="preview-icon-muted" title="Icon Muted"></span>
                    <span class="preview-dot" id="preview-icon-accent" title="Icon Accent"></span>
                  </div>
                </div>
                <label>Brand Primary <input id="set-brand-primary" placeholder="#5B3DF5" /></label>
                <label>Icon Primary <input id="set-icon-primary" placeholder="#4332C6" /></label>
                <label>Icon Muted <input id="set-icon-muted" placeholder="#667085" /></label>
                <label>Icon Accent <input id="set-icon-accent" placeholder="#248DFF" /></label>
                <section class="site-control-panel">
                  <div class="site-control-head">
                    <strong>Site control</strong>
                    <span class="hint">Manage access and operation rules from one place.</span>
                  </div>
                  <div class="site-control-grid">
                    <label class="control-tile">
                      <input type="checkbox" id="set-site-open" />
                      <span>Site Open</span>
                      <small>Allow sign-ins and dashboard access.</small>
                    </label>
                    <label class="control-tile">
                      <input type="checkbox" id="set-read-only" />
                      <span>Read-only mode</span>
                      <small>Block writes for non-owner users.</small>
                    </label>
                    <label class="control-tile">
                      <input type="checkbox" id="set-allow-negative" />
                      <span>Allow negative stock</span>
                      <small>Permit quantities below zero on issue/adjust.</small>
                    </label>
                    <label class="control-tile">
                      <input type="checkbox" id="set-notify-email" />
                      <span>Email notifications</span>
                      <small>Send operational updates by email.</small>
                    </label>
                    <label class="control-tile">
                      <input type="checkbox" id="set-notify-inapp" />
                      <span>In-app notifications</span>
                      <small>Show alerts inside dashboard views.</small>
                    </label>
                    <label class="control-tile">
                      <input type="checkbox" id="set-notify-whatsapp" />
                      <span>WhatsApp notifications</span>
                      <small>Enable WhatsApp alert delivery.</small>
                    </label>
                  </div>
                  <div class="actions site-control-badges">
                    <span class="badge" id="settings-site-open-badge">Site Closed</span>
                    <span class="badge" id="settings-read-only-badge">Read-only OFF</span>
                  </div>
                </section>
                <div class="actions settings-actions">
                  <button class="btn primary" type="submit">Save Settings</button>
                </div>
              </form>
            </article>

            <article class="card settings-side-card">
              <h3>Policy notes</h3>
              <p class="hint">Settings here apply instantly after save.</p>
              <ul class="plain-list">
                <li>Read-only mode blocks managers from write endpoints.</li>
                <li>Owner is always allowed to override read-only lock.</li>
                <li>Every settings update is recorded in owner audit log.</li>
              </ul>
            </article>
          </div>

          <section class="card collapsible-card" id="ui-text-card">
            <div class="card-head">
              <div>
                <h3 id="ui-texts-title">Text & Labels</h3>
                <p class="hint" id="ui-texts-subtitle">Edit dashboard titles and labels.</p>
              </div>
              <div class="inline-controls">
                <label class="input-inline">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  <input id="ui-text-search" placeholder="Search labels..." />
                </label>
                <button
                  id="ui-text-toggle"
                  type="button"
                  class="btn ghost collapse-toggle"
                  aria-expanded="true"
                  aria-controls="ui-text-body"
                  data-collapse-text="Collapse"
                  data-expand-text="Expand">
                  <i class="fa-solid fa-chevron-up icon"></i>
                  <span id="ui-text-toggle-label">Collapse</span>
                </button>
              </div>
            </div>
            <div id="ui-text-body" class="collapsible-body">
              <div id="ui-text-groups" class="text-groups"></div>
            </div>
          </section>
        </section>

        <section class="view" data-view-panel="docs">
          <article class="card">
            <div class="card-head">
              <h3>API Documentation</h3>
              <a class="btn ghost" href="/api-docs" target="_blank" rel="noreferrer">Open Full Docs</a>
            </div>
            <p class="hint">Session-based API. Authenticate first with <code>POST /api/auth/login</code>.</p>
            <div class="table-wrap tall">
              <table>
                <thead>
                  <tr><th>Method</th><th>Path</th><th>Description</th></tr>
                </thead>
                <tbody id="api-docs-table"></tbody>
              </table>
            </div>
            <div class="pager" id="docs-pager"></div>
          </article>
        </section>
      </div>
    </section>
  </section>

  <div id="app-modal" class="app-modal hidden" role="dialog" aria-modal="true" aria-labelledby="app-modal-title">
    <div class="app-modal-card">
      <div class="app-modal-head">
        <h3 id="app-modal-title">Confirm Action</h3>
        <button id="app-modal-close" class="icon-btn app-modal-close" type="button" aria-label="Close">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <p id="app-modal-message" class="hint"></p>
      <p id="app-modal-warning" class="modal-warning hidden"></p>
      <label id="app-modal-input-wrap" class="app-modal-input-wrap hidden">
        <span id="app-modal-input-label">Value</span>
        <input id="app-modal-input" type="text" />
      </label>
      <p id="app-modal-error" class="app-modal-error hidden"></p>
      <div class="actions app-modal-actions">
        <button id="app-modal-cancel" class="btn ghost" type="button">Cancel</button>
        <button id="app-modal-confirm" class="btn danger" type="button">Confirm</button>
      </div>
    </div>
  </div>

  <div id="editor-modal" class="app-modal hidden" role="dialog" aria-modal="true" aria-labelledby="editor-modal-title">
    <div class="app-modal-card editor-modal-card">
      <div class="app-modal-head">
        <h3 id="editor-modal-title">Add Record</h3>
        <button id="editor-modal-close" class="icon-btn app-modal-close" type="button" aria-label="Close">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <p id="editor-modal-message" class="hint"></p>
      <form id="editor-modal-form" class="form-grid compact"></form>
      <p id="editor-modal-error" class="app-modal-error hidden"></p>
      <div class="actions app-modal-actions">
        <button id="editor-modal-cancel" class="btn ghost" type="button">Cancel</button>
        <button id="editor-modal-confirm" class="btn primary" type="button">Save</button>
      </div>
    </div>
  </div>

  <p id="toast" class="toast hidden"></p>
  <script src="/dashboard.js"></script>
</body>
</html>
